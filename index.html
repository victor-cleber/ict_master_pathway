<!DOCTYPE html>
<html lang="en">
    <head>
        <title>SIT 2020 - ICT Pathway</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        
        <style>
            .fakeimg {
                height: 200px;
                background: #aaa;
            }
        </style>
    </head>
    <body>
        <div class="d-flex flex-column flex-md-row align-items-center p-3 px-md-4 mb-3 bg-white border-bottom shadow-sm">
            <h5 class="my-0 mr-md-auto font-weight-normal">2020 Timetable semester 1 (10 February - 26 June)</h5>
            <nav class="my-2 my-md-0 mr-md-3">
                <a class="p-2 text-dark" href="#">Features</a>
                <a class="p-2 text-dark" href="#">Enterprise</a>
                <a class="p-2 text-dark" href="#">Support</a>
                <a class="p-2 text-dark" href="#">Pricing</a>
            </nav>
            <a class="btn btn-outline-primary" href="#">Sign up</a>
        </div>
        <div class="container">

            <div class="row">
                <div class="col-md-4">
                    <div class="btn-group btn-group-lg">
                        <button type="button" class="btn btn-primary" id="pathway1">Pathway 1</button>
                        <button type="button" class="btn btn-primary" id="pathway2">Pathway 2</button>                
                    </div>
                </div>
                <div class="col-md-8">
                        <p id='pathway_description'></p>
                </div>
                <hr class="mb-12">                    
            </div>
            <div class="row">
                <div class="col-md-4">
                    <br>
                    <br>         
                    <div id="userData" >    
                        <br>
                        <br>            
                    </div>
                </div>
                <div class="col-md-8">
                    <table class="table .table-bordered">
                        <thead>
                        <tr>
                        <th></th>
                            <th>Monday</th>
                            <th>Tuesday</th>
                            <th>Wednesday</th>
                            <th>Thursday</th>
                            <th>Friday</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>09 am</td>
                            <td>Monday</td>
                            <td>Doe</td>
                            <td>john@example.com</td>
                            <td>john@example.com</td>
                            <td>john@example.com</td>
                        </tr>
                        <tr>
                            <td>10 am</td>
                            <td>Monday</td>
                            <td>Doe</td>
                            <td>john@example.com</td>
                            <td>john@example.com</td>
                            <td>john@example.com</td>
                        </tr>
                        <tr>
                            <td>11 am</td>
                            <td>Monday</td>
                            <td>Doe</td>
                            <td>john@example.com</td>
                            <td>john@example.com</td>
                            <td>john@example.com</td>
                        </tr>
                        <tr>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>01 pm</td>
                            <td>Monday</td>
                            <td>Doe</td>
                            <td>john@example.com</td>
                            <td>john@example.com</td>
                            <td>john@example.com</td>
                        </tr>
                        <tr>
                            <td>02 pm</td>
                            <td>Monday</td>
                            <td>Doe</td>
                            <td>john@example.com</td>
                            <td>john@example.com</td>
                            <td>john@example.com</td>
                        </tr>
                        <tr>
                            <td>03 pm</td>
                            <td>Monday</td>
                            <td>Doe</td>
                            <td>john@example.com</td>
                            <td>john@example.com</td>
                            <td>john@example.com</td>
                        </tr>
                        <tr>
                            <td>04 pm</td>
                            <td>Monday</td>
                            <td>Doe</td>
                            <td>john@example.com</td>
                            <td>john@example.com</td>
                            <td>john@example.com</td>
                        </tr>
                        </tbody>
                    </table>
                </div>        
            </div>

           

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>

    <script type='text/javascript' src='subjects.json'></script>
    <script>
        $(document).ready(function(){
            url = 'subjects.json';
            var pathway1_subjects = [];
            var pathway2_subjects = [];
            var userData = $('#userData');    

            $('#pathway1').click(function(){                
                var pathway = $(this).attr('id');  
                load_subjects(pathway);                
            });

            $('#pathway2').click(function(){                
                var pathway = $(this).attr('id');
            //    $('#pathway_description').html('<p>The second pathway is designed for students who want to undertake a more substantial research project and consists of four compulsory components:</p>');
                load_subjects(pathway);                
            });

            function load_subjects(pathway){
                //alert("pathway1: " + path);  
                //carregando os dados do json
                $.getJSON(url, function(subjects, status){
                // if (status === 200) {
                    //console.log(data);
                    var pathway1_subjects = [];
                    //loop for each element
                    function buildPathway(subject) {
                        //console.clear()
                        //console.log(subjects);
                        //console.log(value.pathway)      
                        
                            if(subject.pathway[0]['cod'] == '1'){                                
                                $("#userData").empty();  
                                pathway1_subjects.push(subject)                                
                                //console.log(pathway1_subjects);                               
                            }
                        //};
                    };

                    subjects.forEach(buildPathway);

                    //console.log(pathway1_subjects[0].semester)
                    //console.log(pathway1_subjects.length)

                    //for (var subject in pathway1_subjects){
                    for ( i=0; i < pathway1_subjects.length; i++ ){
                        console.log(pathway1_subjects[i])
                        //console.log(subject.semester)
                        if(pathway1_subjects[i].semester == "01"){ 
                            if(pathway1_subjects[i].compulsory == true){ 
                            //console.log('oferecido');
                                $('#pathway_description').html('<p>The first pathway is designed for students who want to undertake more course work and consists of four compulsory components:</p>');
                                var btn = '<div class="custom-control custom-checkbox">'+
                                '<input type="checkbox" class="custom-control-input" checked id="' + pathway1_subjects[i].code + '">' +
                                '<label class="custom-control-label" for="' + pathway1_subjects[i].code  + '">' + pathway1_subjects[i].code  + ' - ' + pathway1_subjects[i].name + '</label> </div>'
                            }else{
                                var btn = '<div class="custom-control custom-checkbox">'+
                                '<input type="checkbox" class="custom-control-input" id="' + pathway1_subjects[i].code + '">' +
                                '<label class="custom-control-label" for="' + pathway1_subjects[i].code  + '">' + pathway1_subjects[i].code  + ' - ' + pathway1_subjects[i].name + '</label> </div>'                    
                            }
                            $(btn).appendTo(userData);
                        }else{
                           // console.log('subject.semester')
                           // console.log(subject.semester)
                            }
                    
                    }
                });
            };   
        });


/*


//populing the table
https://stackoverflow.com/questions/45436241/populate-jq-grid-from-json-string-javascript/45513104

 <div class="row">
                <div class="col-sm-1">
                </div>
                <div class="col-sm-3">
                    <br>
                    <br>
                    <br>
                    <p>(JM) John Mumford</p>
                    <p>(JM) John Mumford</p>
                    <p>(JM) John Mumford</p>
                    <p>(JM) John Mumford</p>        
                </div>            
            </div>    
        </div>  


        if (items.length) {
        var content = '<li>' + items.join('</li><li>') + '</li>';
        var list = $('<ul />').html(content);
        showData.append(list);
        
    showData.text('Loading the JSON file.');


            
            $.each(result, function(i, field){       
                        console.log(field);             
                        var btn = '<div class="custom-control custom-checkbox">'+
                            '<input type="checkbox" class="custom-control-input" id="' +field.code + '">' +
                            '<label class="custom-control-label" for="IT801">' + field.name + '</label> </div>'                    
                        $(btn).appendTo("#userdata");
                });
*/   


    </script>
    </body>
</html>